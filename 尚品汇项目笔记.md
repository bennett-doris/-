# 尚品汇项目

## 项目初始化

### vue-cli 脚手架初始化项目

node + webpack + 淘宝镜像

node_modules文件夹： 项目依赖文件夹

public文件夹： 一般放置一些静态资源，需要注意，放在public文件夹中的静态资源，webpack进行打包的时候会原封不动的打包到dist文件夹中

src 文件夹（程序员源代码文件夹）：

- assets文件夹：一般也是防止静态资源（一般放置多个组件共用的静态资源），需要注意，放置在assets文件夹里面的静态资源，在webpack打包的时候，webpack会把静态资源当作一个模块，打包到JS文件里面。
- components文件夹：一般放置的是非路由组件（全局组件）
- App.vue：唯一的根组件，Vue中的组件（.vue）
- main.js：程序的入口文件，也是整个程序中最先执行的文件



babel.config.js：配置文件（babel相关）

package.json文件：项目的”身份证“，项目中有哪些依赖，怎么运行等

package-lock.json：缓存性文件

### 项目的其他配置

项目运行的时候浏览器自动打开

```js
"scripts": {
    "serve": "vue-cli-service serve --open",
    "build": "vue-cli-service build",
    "lint": "vue-cli-service lint"
  },
```

eslint 校验工具功能关闭

在根目录下创建一个vue.config.js文件

```json
module.export = {
  lintOnSave = false
}
```

src文件夹简写方法，配置别名

jsconfig.json 配置别名提示【@代表的是src文件夹，这样将来文件过多，找的时候方便很多】

```json
{
  "compilerOptions": {
    "baseUrl": "./",
    "paths": {
      "@/*": ["src/*"]
    }
  },
  "exclude": ["mode_modules", "dist"]
}
```

### 项目路由的分析

路由组件：

Home 首页路由组件、Search路由组件、login路由组件、注册路由组件

非路由组件：

Header

footer【首页和搜索页存在】

### 完成非路由组件Header与Footer业务

1. 书写静态页面
2. 拆分组件
3. 获取服务器的数据动态展示
4. 完成相应的动态业务逻辑

注意1：创建组件的是偶，组件结构+组件的样式 + 组件的资源

注意2：项目采用的less样式，浏览器不能识别less样式，需要通过less，less-loader【安装五版本的】进行处理less，把less样式变为css样式，浏览器才能识别

注意3：如果想让组件识别less样式，需要在style标签的身上加上lang-less

### 路由组件的搭建

路由组件应该有四个：Home、Search、Login、Register

components文件夹：防止非路由组件（共用全局组件）

-pages|views文件夹，经常放置路由组件

**配置路由**

项目当中配置的路由一般放置在router文件夹中

**总结**

路由组件与非路由组件的区别

- 路由组件一般放置在pages|views文件夹中，非路由组件一般放置在components文件夹中
- 路由组件一般需要在router文件夹中进行注册（使用的即为组件的名字），非路由组件在使用的时候，一般都是以标签的形式使用

$route: 一般获取路由信息【路径、query。params等】

$router: 一般进行编程式导航进行路由跳转【push|replace】

**路由跳转**

路由的跳转有两种形式

- 声明式导航router-link，可以进行路由的跳转
- 编程式导航push|replace，可以进行路由跳转

编程式导航：生命是导航能做的，编程式导航都能做

但是编程式导航除了可以进行路由跳转，还可以做一些其他的业务逻辑

### Footer组件显示与隐藏

显示或隐藏组件：v-if|v-show

Footer组件：在Home、Search显示Footer组件

Footer组件：在登录、注册时隐藏

我们可以根据组件身上的$route 获取当前路由的信息，通过路由路径判断Footer显示与隐藏

配置路由的时候，可以给路由添加路由辕信息【meta】，路由需要配置对象，key不能乱写

### 路由传参

**路由跳转的方式**

- 声明式导航，router-link，带to属性，可以实现路由的跳转
- 编程式导航：利用的是组件实例的$router.push|replace方法，可以实现路由的跳转，还可以书写自己的一些业务

**路由传参，参数的写法**

- params参数：属于路径当中的一部分，需要注意，在配置路由的时候，需要占位
- query参数：不属于路径当中的一部分，类似于ajax中的queryString  /home/?k=v&kv=kv,不需要占位

### 路由传参相关面试题

1. 路由传递参数（对象写法）path是否可以结合params参数一起使用
2. 如何指定params参数可传可不传
3. params参数可以传递也可以不传递，如果传递是空船，如何解决
4. 路由组件能不能传递props数据

## 项目第二天

编程式路由跳转到当前路由（参数不变），多次执行会抛出NavigationDuplicated的警告错误

-  最新的 "vue-router": '3.5' 引入了promise
- 通过给push方法传递相应的成功和失败的回调函数捕获当前错误解决       

### Home模块组件拆分

- 先把静态页面完成

- 拆分出静态组件

- 获取服务器的数据进行展示                                                                                                            
- 动态业务

### 三级联动组件完成

- 由于三级联动，在Home、Search、Detail都有使用，所以把三级联动注册为全局组件。
- 好处：只需要注册一次，就可以在项目任意地方使用

### 完成其余静态组件

### 接口测试

- code 200 代表服务器返回数据成功
- 接口前缀都有/api

### axios 二次封装

#### 为什么需要二次封装axios

请求拦截器：可以再发请求之前处理一些业务

响应拦截器：当服务器数据返回以后，可以处理一些事情

在项目当中经常出现API文件夹【axios】 

接口当中：路径都带有/api

### 接口统一管理

项目很小：完全可以在组件的声明周期函数中发请求

项目大：接口统一管理

### 跨域问题

协议、域名、端口号不同的请求称为跨域

解决： JSONP、CROS、代理

### nprogress 进度条的使用

npm install nprogress

start：进度条开始  done：进度条结束

### vuex 状态管理库

vuex 是官方提供的一个插件，状态管理库，集中式管理项目中组件共用的数据

切记，如果项目很小，完全不需要vuex，如果项目很大，组件很多，数据很多，数据维护很费劲，才使用vuex

state

mutations

actions

getters

modules

**vuex实现模块化开发**

如果项目过大，组件过多，接口也很多，数据也很多，可以让Vuex实现模块式开发

### 完成TypeNav三级联动展示数据业务

### 完成一级分类动态添加背景色

第一种解决方案：采用样式完成。

第二种解决方案：采用JS完成

#### 通过JS控制二三级商品分类的显示与隐藏

最开始的时候，是通过CSS样式display: block | none 显示二三级分类

#### 演示卡顿现象

正常：事件触发非常频繁，而且每一次的触发，回调函数都要去执行（如果时间很短，而回调函数内部有计算，那么很可能出现浏览器卡顿）

#### 函数的防抖与节流

节流：在规定的时间范围内不会重复触发回调，只有大于这个时间间隔才会触发回调，把频繁触发变为少量触发

防抖：前面的所有的触发都被取消，最后一次执行在规定的时间之后才会触发，也就是说如果连续快速的触发只会执行一次

#### 完成三级联动节流的操作

#### 三级联动组件的路由跳转与传递参数

三级联动用户可以点击的：一级分类、二级分类、三级分类

点击的时候，Home模块跳转到Search模块，一级会把用户选中的产品（产品的名字、产品的ID）在路由跳转的时候进行传递。

三级联动：如果使用声明式导航router-link，可以实现路由的跳转与传递参数。但是需要注意，出现卡断现象、

router-link：一个组件，，当服务器数据返回之后，循环出很多的router-link 组件【创建组件实例】，组件太多。创建组件实例的时候，一瞬间创建1000+，很耗内存，因此出现了卡顿现象。

## 项目第四天

### 开发Search模块中的TypeNav商品分类菜单（过度动画）

过渡动画：前提是组件|元素务必要有v-if|v-show指令才可以进行

#### 商品分类三级列表优化

将请求发送 放在App根组件中，只会执行一次

#### 合并params和query参数

#### 开发Home首页中的ListContainer组件与Floor组件

服务器返回的数据接口只有商品分类菜单数据。对于ListContainer组件与Floor组件数据服务器没有提供。

mock数据（模拟）：如果你想mock数据，需要用到一个插件mockjs

使用步骤：

- 在项目当中src文件夹中创建mock文件夹
- 准备JSON数据
- 把mock数据需要的图片放置到public文件夹中
- 创建mockServe。js通过mockjs插件实现模拟数据
- mockServe.js文件在入口文件中引入

#### Swiper

- 第一步：引包（响应JS、CSS）
- 第二步：页面中结构务必要有
- 第三步（页面当中务必要有结构）：new Swiper实例

#### ListContaniner组件开发重点

安装swiper组件

## 项目第五天

### 完美解决轮播图问题

watch+nextTick：数据监听，监听已有数据变化

### 开发floor组件

### 组件通信的方式

props：父子组件通信

自定义事件： $on  $emit 实现子给父通信

全局事件总线：$bus 全能

pubsub-js: vue中几乎不用

slot：插槽

```
'''

                            _ooOoo_
                           o8888888o
                           88" . "88
                           (| -_- |)
                            O\ = /O
                        ____/`---'\____
                      .   ' \\| |// `.
                       / \\||| : |||// \
                     / _||||| -:- |||||- \
                       | | \\\ - /// | |
                     | \_| ''\---/'' | |
                      \ .-\__ `-` ___/-. /
                   ___`. .' /--.--\ `. . __
                ."" '< `.___\_<|>_/___.' >'"".
               | | : `- \`.;`\ _ /`;.`/ - ` : | |
                 \ \ `-. \_ __\ /__ _/ .-` / /
         ======`-.____`-.___\_____/___.-`____.-'======
                            `=---='

         .............................................
                  佛祖保佑             永无BUG
          佛曰:
                  写字楼里写字间，写字间里程序员；
                  程序人员写程序，又拿程序换酒钱。
                  酒醒只在网上坐，酒醉还来网下眠；
                  酒醉酒醒日复日，网上网下年复年。
                  但愿老死电脑间，不愿鞠躬老板前；
                  奔驰宝马贵者趣，公交自行程序员。
                  别人笑我忒疯癫，我笑自己命太贱；
                  不见满街漂亮妹，哪个归得程序员？

'''
```

### 把首页的轮播图拆分为一个共用的全局组件

切记：以后开发项目的时候，如果看到某一个组件在很多地方都使用，直接变成全局组件，注册一次，任意地方使用，置于components文件夹中

### Search 模块开发

- 静态页面+静态组件拆分
- 发请求（API）
- vuex三连环
- 组件获取仓库数据，动态展示数据

### 排序操作

综合，价格，升序，降序


### 分页器

### 详情页面